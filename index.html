<!DOCTYPE html>
<html>
<head>
  <title>AR Wedding Invitation - Video</title>

  <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/3.3.2/aframe/build/aframe-ar.js"></script>

  <script>
    AFRAME.registerComponent("button-action", {
      schema: { type: "string" },
      init: function () {
        this.el.addEventListener("click", () => {
          if (this.data === "menu") {
            alert("ðŸ½ Wedding Menu\n\nâ€¢ Welcome Drink\nâ€¢ Starters\nâ€¢ Main Course\nâ€¢ Desserts");
          }
          if (this.data === "location") {
            window.open("https://maps.google.com", "_blank");
          }
        });
      }
    });

    // OPTIONAL: Play video on click (helps with browser autoplay restrictions)
    AFRAME.registerComponent('vidhandler', {
      init: function () {
        this.el.sceneEl.addEventListener('markerFound', () => {
          document.querySelector('#wedding-video-file').play();
        });
        this.el.sceneEl.addEventListener('markerLost', () => {
          document.querySelector('#wedding-video-file').pause();
        });
      }
    });
  </script>
</head>

<body style="margin:0; overflow:hidden;">
<a-scene
  embedded
  renderer="alpha: true"
  arjs="sourceType: webcam; debugUIEnabled: false;"
  vr-mode-ui="enabled:false">

  <a-assets>
    <video 
      id="wedding-video-file" 
      src="wedding.mp4" 
      preload="auto" 
      loop="true" 
      crossOrigin="anonymous" 
      playsinline 
      webkit-playsinline 
      muted>
    </video>
  </a-assets>

  <a-marker preset="hiro" smooth="true" vidhandler>

    <a-entity position="0 0 0">

      <a-video 
        src="#wedding-video-file"
        position="0 0.5 0"
        rotation="-90 0 0" 
        width="1.6" 
        height="0.9">
      </a-video>
      
      <a-plane 
        position="0 0.5 0.01" 
        rotation="-90 0 0" 
        width="1.7" 
        height="1.0" 
        color="#d4af37" 
        material="side: back">
      </a-plane>

      <a-box
        class="clickable"
        position="0 0.25 1"
        width="0.9"
        height="0.15"
        depth="0.4"
        color="#4CAF50"
        button-action="menu"
        animation__hover="property: scale; to: 1.05 1.05 1.05; startEvents: mouseenter"
        animation__out="property: scale; to: 1 1 1; startEvents: mouseleave">
        
        <a-text value="Menu" align="center" color="white" position="0 0.1 0.21" scale="1.5 1.5 1.5"></a-text>
      </a-box>

      <a-box
        class="clickable"
        position="0 -0.05 1"
        width="0.9"
        height="0.15"
        depth="0.4"
        color="#2196F3"
        button-action="location"
        animation__hover="property: scale; to: 1.05 1.05 1.05; startEvents: mouseenter"
        animation__out="property: scale; to: 1 1 1; startEvents: mouseleave">
        
        <a-text value="Location" align="center" color="white" position="0 0.1 0.21" scale="1.5 1.5 1.5"></a-text>
      </a-box>

    </a-entity>
  </a-marker>

  <a-camera cursor="rayOrigin: mouse; fuse: false" raycaster="objects: .clickable"></a-camera>

</a-scene>
</body>
</html>
